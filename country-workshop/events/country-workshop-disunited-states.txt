# Most differences from the original Disunited States code are highlighted by comments. Extra
# couple things:
#
# - To compensate for the dire pop numbers outside the East Coast, there are a couple military
#   adjustments targeting the smaller (esp. Western) countries:
#   * conscription law set to high
#   * military stockpile tweaks, granting up to ~10 infantry brigades worth of supplies for 10 years
#     of war to the most needy countries
#   * add a couple token "ghost" brigades to serve as a light deterrent to the AI, or equally as
#     valid to serve as an AI schmuck-bait to get them to start stupid wars (but that's just funny)
#
# - The FSA is kept in check in a couple places, as it can easily turn into a powerhouse even in the
#   inept hands of the AI.
#
# - The larger countries (FSA, CSA, NEN) are still given a small stockpile to be able to build 4
#   brigades worth of infantry. This compensates for the fact that the transfer of Union troops is
#   seemingly unreliable.
#
# - Grant 20k extra cash to every country. Again, to compensate for having to rebuild with low rank.
#
# Implementation notes:
# - The order of executing events is significant, refer to the enabling event.
# - `random_country` is used in select spots as some effects don't come through to the intended
#   country otherwise (is this a `change_tag`-style scope invalidation issue? is this because
#   `immediate` code is extra fussy? who knows). It's also used in other spots even when not
#   required, for the sake of consistency.
# - The duration of "No More War" is not really expected to be random, due to game limitations.

country_event = {
    id      = 678004
    title   = country-workshop.enable-disunited-states.name
    desc    = country-workshop.enable-disunited-states.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        set_global_flag = country-workshop.FSA-enabled

        ## Suspend Mexican cores
        ## California
        MEX_85  = { remove_core = MEX }

        ## Nevada
        MEX_94  = { remove_core = MEX }

        ## Utah
        MEX_97  = { remove_core = MEX }

        ## Arizona
        MEX_100 = { remove_core = MEX }

        ## New Mexico
        MEX_103 = { remove_core = MEX }

        ## Texas
        TEX_132 = { remove_core = MEX }

        ## Mexican Wyoming
        # Rock Springs
        110     = { remove_core = MEX }
        # Riverside
        107     = { remove_core = MEX }

        ## Mexican Colorado
        # Grand Junction
        108     = { remove_core = MEX }
        # Aspen
        109     = { remove_core = MEX }
        # Pueblo
        103     = { remove_core = MEX }

        ## Mexican Kansas
        # Hugoton
        128     = { remove_core = MEX }

        ## Mexican Oklahoma
        # Guymon
        129     = { remove_core = MEX }

        ### War of Texan Independence
        TEX = { set_country_flag = santa_ana_captured }

        ### The Lone Star State, Texan statehood
        set_country_flag = texan_state_flag
        # effects moved to country setup event due to missing cores

        ### Treaty of Webster-Ashburton

        set_global_flag = webster_ashburton_signed
        249 = { remove_core = CAN }
        250 = { remove_core = CAN }
        250 = { remove_core = ENG }
        250 = { remove_core = MRU }
        ENG = { prestige = 10 }

        250 = { add_core = THIS secede_province = THIS }
        158 = { add_core = THIS secede_province = THIS }
        250 = { remove_core = CAN }
        158 = { remove_core = CAN }
        250 = { remove_core = QUE }
        69 = { remove_core = NEN }
        relation = { who = ENG value = 100 }
        prestige = 10

        ### Oregon Treaty

        set_country_flag = oregon_treaty
        USA_78 = { add_core = THIS }
        prestige = 10

        ENG = {
            prestige = -10
            CAN_13 = {
                limit = {
                    empty = no
                }
                add_core = ENG
                add_province_modifier = {
                    name = gateway_to_america
                    duration = 365
                }
            }
            ENG_22 = { add_core = ENG }
            USA_78 = {
                remove_core = COL
                remove_core = ENG
            }
            USA_81 = {
                remove_core = COL
                remove_core = ENG
            }
            USA_91 = {
                remove_core = COL
                remove_core = ENG
            }
            114 = {
                remove_core = COL
            }
            111 = {
                remove_core = COL
            }
            RPL = {
                any_owned = {
                    limit = {
                        empty = no
                        region = CAN_13
                    }
                    add_core = COL
                    add_core = RPL
                }
            }
            RPL = {
                all_core = {
                    remove_core = ENG
                }
            }
            # original province modifiers moved to country setup event due to stating of colonies
            any_owned = {
                limit = {
                    OR = {
                        region = USA_78
                        region = USA_81
                        region = USA_91
                    }
                    is_core = THIS
                }
                secede_province = THIS
                remove_core = ENG
                life_rating = 5
            }
        }

        ## Oregon migration
        91 = { secede_province = THIS }
        81 = {
            change_province_name = "Portland"
            life_rating = 15
            secede_province = THIS
            random_list = {
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 2 } }
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 2.5 } }
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 3 } }
            }
        }
        82 = {
            change_province_name = "Baker City"
            life_rating = 15
            secede_province = THIS
            random_list = {
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 2 } }
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 2.5 } }
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 3 } }
            }
        }
        83 = {
            change_province_name = "Eugene"
            life_rating = 15
            secede_province = THIS
            random_list = {
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 2 } }
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 2.5 } }
                33 = { any_pop = { limit = { has_pop_culture = yankee } reduce_pop = 3 } }
            }
        }

        ### Bear Flag Revolt
        set_global_flag = bear_flag_revolt
        set_country_flag = annex_california

        ### Mormon exodus
        # This is performed for the pop effects, in particular bringing Yankee pops over. The extra
        # cores of the original decision are not added, though they are not lost forever: the
        # irredentism decision can add them later.

        set_country_flag = mormon_exodus
        DES = { set_country_flag = mormon_exodus }

        any_country = {
            any_pop = {
                limit = { has_pop_religion = mormon }

                dominant_issue = { value = moralism factor = 0.5 }
                consciousness = 5
                move_pop = 97
            }
        }

        any_pop = {
            limit = { has_pop_religion = mormon }

            dominant_issue = { value = moralism factor = 0.5 }
            consciousness = 5
            move_pop = 97
        }

        97 = {
            # original province modifiers moved to country setup event due to stating of colonies
            any_pop = {
                limit = { has_pop_culture = native_american_minor }
                reduce_pop = 0.25
            }
        }

        ### Liberia
        # We want the immediate effects of 441266 to avoid giving a save scum incentive.
        # Unfortunately this has the side effect that if the USA reforms and re-acquires Liberia
        # they receive the event. They can still pay to keep it, so it's not all bad.
        1887 = { add_core = LIB }
        1888 = { add_core = LIB }
        LIB = { all_core = { remove_core = THIS } }
        release = LIB
        relation             = { who = LIB value = 400 }
        diplomatic_influence = { who = LIB value = 400 }
        LIB = {
            capital = 1887
            election = yes
            add_country_modifier = { name = unrecognized_country duration = 3650 }
        }

        ### Manifest Destiny & the Mexican-American War
        # we leave the following deliberately up for grabs:
        # - trail of tears, Indian territory, Custer's expedition

        ## Treaty of Guadalupe Hidalgo

        set_country_flag = hasmanifestdestiny
        set_country_flag = treaty_of_guadalupe_hidalgo
        prestige = 20

        TEX_132 = { add_core = THIS } # Texas
        MEX_85  = { add_core = THIS } # California
        MEX_94  = { add_core = THIS } # Nevada
        MEX_97  = { add_core = THIS } # Utah
        USA_78  = { add_core = THIS } # Washington
        USA_81  = { add_core = THIS } # Portland
        USA_91  = { add_core = THIS } # Idaho
        USA_106 = { add_core = THIS } # Colorado
        USA_111 = { add_core = THIS } # Wyoming
        USA_126 = { add_core = THIS } # Kansas
        USA_129 = { add_core = THIS } # Oklahoma
        100  = { add_core = THIS }
        101  = { add_core = THIS }
        103  = { add_core = THIS }
        104  = { add_core = THIS }
        105  = { add_core = THIS }
        2148 = { add_core = THIS }

        MEX = {
            any_owned = {
                limit = {
                    OR = {
                        is_core = THIS
                        region = TEX_132
                        region = MEX_85
                        region = MEX_94
                        region = MEX_97
                        region = USA_81
                        region = USA_91
                        region = USA_106
                        region = USA_111
                        region = USA_126
                        region = USA_129
                        province_id = 100
                        province_id = 101
                        province_id = 103
                        province_id = 104
                        province_id = 105
                        province_id = 2148
                    }
                }

                secede_province = THIS
            }

            # don't set the treaty for Mexico on purpose, to leave Refute Manifest Destiny open
            treasury = 100000
            prestige_factor = -0.5
            end_war = THIS
            end_war = TEX
            end_war = CAL
        }

        ## Rio Grande Treaty
        set_country_flag = rio_grande_treaty

        ### The Gadsden Purchase
        set_country_flag = gadsden_negotiations
        102  = { add_core = THIS secede_province = THIS }
        2662 = { add_core = THIS secede_province = THIS }

        ### The Alaska Purchase

        set_global_flag = alaska_purchase_completed
        RUS = {
            prestige = 10
            treasury = 100000
            remove_accepted_culture = alaskan
            any_owned = {
                limit = { continent = north_america }
                secede_province = THIS
            }
        }
        USA_1 = {
            remove_core = RUS
            add_core = THIS
        }
        LSK = {
            government = democracy
            primary_culture = THIS

            clr_country_flag = sunni_country
            clr_country_flag = shiite_country
            clr_country_flag = ibadi_country
            clr_country_flag = catholic_country
            clr_country_flag = protestant_country
            clr_country_flag = mormon_country
            clr_country_flag = orthodox_country
            clr_country_flag = coptic_country
            clr_country_flag = jewish_country
            clr_country_flag = yazidi_country
            clr_country_flag = mahayana_country
            clr_country_flag = gelugpa_country
            clr_country_flag = theravada_country
            clr_country_flag = hindu_country
            clr_country_flag = shinto_country
            clr_country_flag = sikh_country
            clr_country_flag = animist_country

            religion = protestant
            set_country_flag = protestant_country
        }

        ### The American Civil War
        # we leave the following deliberately up for grabs:
        # - King Cotton
        # - the Bixby letter
        # - the Anaconda plan

        set_country_flag = nashville_convention_held
        set_country_flag = fugitive_slave_act_enacted
        set_country_flag = kansas_nebraska_act_acting
        set_country_flag = corwin_amendment_enacted
        set_country_flag = sherman_marched_to_the_sea

        set_global_flag = american_civil_war_has_happened

        ### The Disunited States

        # country_event = 95260
        set_global_flag = disunited_states
        set_global_flag = second_american_civil_war
        add_country_modifier = {
            name = begin_disunited_states
            duration = 3650
        }

        # Order is significant due to overlapping cores & diplomacy setup:
        # - Pueblo, Colorado, Dakota, New American Alliance, CSA, FSA, player tag switch
        UNM = { country_event = 678500 }
        UNB = { country_event = 678501 }
        DAK = { country_event = 678502 }
        UIL = { country_event = 678503 }
        CSA = { country_event = 678504 }
        FSA = { country_event = 678505 }
        random_owned = {
            limit = { owner = { ai = no } }
            owner = { change_tag_no_core_switch = FSA }
        }
        UOR = { country_event = 678506 }
        DES = { country_event = 678507 }
        CAL = { country_event = 678508 }
        TEX = { country_event = 678509 }
        NEN = { country_event = 678510 }
        LSK = { country_event = 678511 }
        HAW = { country_event = 678512 }

        # D.C. cores last
        2146 = { add_core = FSA add_core = CSA }

        random_country = {
            limit = {
                tag = FROM
                NOT = { tag = USA }
                has_country_flag = country-workshop.new-start
            }

            country_event = 678005
        }

        random_owned = {
            limit = {
                USA = { has_country_flag = country-workshop.new-start }
            }

            FSA = { country_event = 678005 }
        }
    }

    option = {
        name = country-workshop.enable-disunited-states.opt0

        # End of the convoluted setup. The USA has to be removed off the map outside of the
        # `immediate` block for the player tag switch to work. When done this way the setup also
        # ensures that the former Union brigades are transferred to the successor FSA, CSA, and New
        # England. They are otherwise lost, which would necessitate a period of rebuilding troops.
        2146 = { secede_province = CSA }
        FSA = { inherit = USA }
    }
}

country_event = {
    id      = 678005
    title   = country-workshop.disunited-states-start.name
    desc    = country-workshop.disunited-states-start.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    option = {
        name = country-workshop.disunited-states-start.opt0

        # Keep playing current country

        ai_will_do = { factor = 1 }
    }

    option = {
        name = country-workshop.disunited-states-start.opt1

        # North
        country_event = 678513

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start.opt2

        # East
        country_event = 678514

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start.opt3

        # South
        country_event = 678515

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start.opt4

        # West
        country_event = 678516

        ai_will_do = { factor = 0 }
    }
}

# Pueblo Republic
country_event = {
    id      = 678500
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = UNM_created
            prestige = -25

            MEX_100 = { add_core = UNM } # Arizona
            MEX_103 = { add_core = UNM } # New Mexico

            release = UNM
            random_country = {
                limit = { tag = UNM }

                capital = 100
                leadership = 40

                treasury = 20000

                set_country_flag = asked_to_join_csa
                set_country_flag = asked_to_join_california
                set_country_flag = asked_to_rejoin_usa

                # Shorter to try & encourage an early war with Texas
                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 70 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 75 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 80 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 85 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                }

                ## Mexican bloc
                relation = { who = MEX value = 400 }
                create_alliance = MEX

                ## Military tweaks: big boost

                political_reform = mandatory_service

                # 10 infantry @ 10 years
                small_arms      = 438
                ammunition      = 2738
                canned_food     = 2555
                regular_clothes = 365

                # 3 token brigades
                sub_unit = { type = infantry value = 100 }
                sub_unit = { type = infantry value = 100 }
                sub_unit = { type = infantry value = 100 }
            }

            relation             = { who = UNM value = -200 }
            diplomatic_influence = { who = UNM value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# Colorado Republic
country_event = {
    id      = 678501
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = UNB_created
            prestige = -25

            USA_106 = { add_core = UNB } # Colorado
            USA_126 = { add_core = UNB } # Kansas
            USA_124 = { add_core = UNB } # Nebraska
            MEX_103 = { add_core = UNB } # New Mexico
            USA_129 = { add_core = UNB } # Oklahoma

            release = UNB
            random_country = {
                limit = { tag = UNB }

                capital = 106
                leadership = 40

                treasury = 20000

                set_country_flag = asked_to_join_fsa
                set_country_flag = asked_to_join_new_america
                set_country_flag = asked_to_rejoin_usa

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Central bloc set up by UIL

                ## Military tweaks: big boost

                political_reform = mandatory_service

                # 10 infantry @ 10 years
                small_arms      = 438
                ammunition      = 2738
                canned_food     = 2555
                regular_clothes = 365

                # 3 token brigades
                sub_unit = { type = infantry value = 106 }
                sub_unit = { type = infantry value = 106 }
                sub_unit = { type = infantry value = 106 }
            }

            relation             = { who = UNB value = -200 }
            diplomatic_influence = { who = UNB value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# Dakota Republic
country_event = {
    id      = 678502
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = DAK_created
            prestige = -25

            USA_121 = { add_core = DAK } # South Dakota
            USA_118 = { add_core = DAK } # North Dakota
            USA_116 = { add_core = DAK } # Montana
            USA_124 = { add_core = DAK } # Nebraska
            USA_111 = { add_core = DAK } # Wyoming

            release = DAK
            random_country = {
                limit = { tag = DAK }

                capital = 122
                leadership = 40

                treasury = 20000

                set_country_flag = asked_to_join_fsa
                set_country_flag = asked_to_join_california
                set_country_flag = asked_to_join_new_america
                set_country_flag = asked_to_rejoin_usa

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Central bloc set up by UIL

                ## Military tweaks: big boost

                political_reform = mandatory_service

                # 10 infantry @ 10 years
                small_arms      = 438
                ammunition      = 2738
                canned_food     = 2555
                regular_clothes = 365

                # 4 token brigades
                sub_unit = { type = infantry value = 122 }
                sub_unit = { type = infantry value = 122 }
                sub_unit = { type = infantry value = 122 }
                sub_unit = { type = infantry value = 122 }
            }

            relation             = { who = DAK value = -200 }
            diplomatic_influence = { who = DAK value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# New American Alliance
country_event = {
    id      = 678503
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = UIL_created
            prestige = -25

            USA_168 = { add_core = UIL } # Illinois
            USA_151 = { add_core = UIL } # Iowa
            USA_176 = { add_core = UIL } # Michigan
            USA_148 = { add_core = UIL } # Missouri
            USA_158 = { add_core = UIL } # Minnesota
            USA_162 = { add_core = UIL } # Wisconsin

            release = UIL
            random_country = {
                limit = { tag = UIL }

                capital = 163
                leadership = 40

                treasury = 20000

                set_country_flag = asked_to_join_fsa
                set_country_flag = asked_to_rejoin_usa

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Central bloc
                relation = { who = DAK value = 400 }
                relation = { who = UNB value = 400 }
                create_alliance = DAK
                create_alliance = UNB
                DAK = {
                    relation = { who = UNB value = 400 }
                    create_alliance = UNB
                }

                ## Military tweaks: big boost

                political_reform = mandatory_service

                # 10 infantry @ 10 years

                small_arms      = 438
                ammunition      = 2738
                canned_food     = 2555
                regular_clothes = 365

                # 6 token brigades
                sub_unit = { type = infantry value = 163 }
                sub_unit = { type = infantry value = 163 }
                sub_unit = { type = infantry value = 163 }
                sub_unit = { type = infantry value = 163 }
                sub_unit = { type = infantry value = 163 }
                sub_unit = { type = infantry value = 163 }
            }

            relation             = { who = UIL value = -200 }
            diplomatic_influence = { who = UIL value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# CSA
country_event = {
    id      = 678504
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = CSA_created
            prestige = -25

            USA_196  = { add_core = CSA } # Alabama
            USA_144  = { add_core = CSA } # Arkansas
            USA_200  = { add_core = CSA } # Florida
            USA_201  = { add_core = CSA } # Georgia
            USA_185  = { add_core = CSA } # Kentucky
            USA_139  = { add_core = CSA } # Louisiana
            USA_219  = { add_core = CSA } # Maryland
            USA_194  = { add_core = CSA } # Mississippi
            USA_2556 = { add_core = CSA } # North Carolina
            USA_205  = { add_core = CSA } # South Carolina
            USA_188  = { add_core = CSA } # Tennessee
            USA_211  = { add_core = CSA } # Virginia
            USA_218  = { add_core = CSA } # West Virginia

            # D.C. after player tag switch
            2146 = { remove_core = CSA }

            release = CSA
            random_country = {
                limit = { tag = CSA }

                capital = 60
                leadership = 40

                treasury = 20000

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Southern bloc
                relation = { who = TEX value = 400 }
                create_alliance = TEX

                ## Military tweaks

                # 4 brigades worth
                small_arms      = 40
                canned_food     = 40
                regular_clothes = 40
            }

            relation             = { who = CSA value = -200 }
            diplomatic_influence = { who = CSA value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# FSA
country_event = {
    id      = 678505
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = FSA_created
            prestige = -25

            USA_168 = { add_core = FSA } # Illinois
            USA_170 = { add_core = FSA } # Indiana
            USA_151 = { add_core = FSA } # Iowa
            USA_185 = { add_core = FSA } # Kentucky
            USA_219 = { add_core = FSA } # Maryland
            USA_176 = { add_core = FSA } # Michigan
            USA_148 = { add_core = FSA } # Missouri
            USA_158 = { add_core = FSA } # Minnesota
            USA_232 = { add_core = FSA } # New York
            USA_231 = { add_core = FSA } # New Jersey
            USA_178 = { add_core = FSA } # Ohio
            USA_223 = { add_core = FSA } # Pennsylvania
            USA_218 = { add_core = FSA } # West Virginia
            USA_162 = { add_core = FSA } # Wisconsin

            # D.C. after player tag switch
            2146 = { remove_core = FSA }

            release = FSA
            random_country = {
                limit = { tag = FSA }

                capital = 223
                leadership = 40

                treasury = 20000

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Northern bloc
                relation = { who = NEN value = 400 }
                create_alliance = NEN

                ## Special antagonism with the CSA
                relation = { who = CSA value = -400 }

                ## Special relationship with Liberia
                relation = { who = LIB value = 400 }

                ## Military tweaks: keep the FSA in check

                political_reform = two_year_draft

                # 4 brigades worth
                small_arms      = 40
                canned_food     = 40
                regular_clothes = 40

                ## Union fleet remnants, out of the original:
                # - 11 men'o'war
                # -  9 frigates
                # -  3 clippers
                # We assign the following to the successor FSA (in Camden):
                # -  6 men'o'war
                # -  5 frigates
                # -  2 clippers
                # As well as the following token transfers to countries that likely can't supply
                # them for very long:
                # -  1 man'o'war to California
                # -  1 frigate to Alaska
                # -  1 clipper to Hawaii
                # To help the AI get its stranded brigades home we conjure the following out of thin
                # air:
                # -  1 clipper to New England
                sub_unit = { type = manowar value = 231 }
                sub_unit = { type = manowar value = 231 }
                sub_unit = { type = manowar value = 231 }
                sub_unit = { type = manowar value = 231 }
                sub_unit = { type = manowar value = 231 }
                sub_unit = { type = manowar value = 231 }
                sub_unit = { type = frigate value = 231 }
                sub_unit = { type = frigate value = 231 }
                sub_unit = { type = frigate value = 231 }
                sub_unit = { type = frigate value = 231 }
                sub_unit = { type = frigate value = 231 }
                sub_unit = { type = clipper_transport value = 231 }
                sub_unit = { type = clipper_transport value = 231 }
                # 2 years worth of supplies...
                # ...for the men'o'war
                clippper_convoy = 1051
                artillery       = 350
                # ...for the frigates
                clippper_convoy = 584
                artillery       = 146
                # ...for the transports
                clippper_convoy = 47
            }

            relation             = { who = FSA value = -200 }
            diplomatic_influence = { who = FSA value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# Oregon
country_event = {
    id      = 678506
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = UOR_created
            prestige = -25

            USA_78 = { add_core = UOR } # Washington
            USA_81 = { add_core = UOR } # Oregon
            USA_91 = { add_core = UOR } # Idaho
            random_owned = {
                limit = { region = CAN_13 } # Columbia
                state_scope = { add_core = UOR }
            }

            release = UOR
            random_country = {
                limit = { tag = UOR }

                capital = 81
                leadership = 40

                treasury = 20000

                any_owned = {
                    limit = {
                        OR = {
                            region = USA_78
                            region = USA_81
                            region = USA_91
                        }
                        is_core = THIS
                    }

                    # originally from Oregon Treaty
                    add_province_modifier = {
                        name = gateway_to_america
                        duration = 3650
                    }
                }

                set_country_flag = asked_to_join_california
                set_country_flag = asked_to_rejoin_usa

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Western bloc set up by CAL

                ## Military tweaks: big boost

                political_reform = mandatory_service

                # 10 infantry @ 10 years
                small_arms      = 438
                ammunition      = 2738
                canned_food     = 2555
                regular_clothes = 365

                # 3 token brigades
                sub_unit = { type = infantry value = 81 }
                sub_unit = { type = infantry value = 81 }
                sub_unit = { type = infantry value = 81 }
            }

            relation             = { who = UOR value = -200 }
            diplomatic_influence = { who = UOR value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# Deseret
country_event = {
    id      = 678507
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = DES_created
            prestige = -25

            MEX_97 = { add_core = DES } # Utah
            MEX_94 = { add_core = DES } # Nevada

            release = DES
            random_country = {
                limit = { tag = DES }

                set_country_flag = usstatehood_we_have_applied
                # Country Workshop executive decision: keep Deseret a theocracy
                # political_reform = universal_voting
                # political_reform = population_equal_weight
                # political_reform = yes_meeting
                # political_reform = free_press
                political_reform = non_socialist
                # political_reform = secret_ballots
                capital = 97
                leadership = 40

                treasury = 20000

                # from Mormon Exodus
                97 = {
                    add_province_modifier = { name = home_of_the_mormons duration = 10950 }
                }

                set_country_flag = asked_to_join_california
                set_country_flag = asked_to_rejoin_usa

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Western bloc set up by CAL

                ## Military tweaks: big boost

                political_reform = mandatory_service

                # 10 infantry @ 10 years
                small_arms      = 438
                ammunition      = 2738
                canned_food     = 2555
                regular_clothes = 365

                # 2 token brigades
                sub_unit = { type = infantry value = 97 }
                sub_unit = { type = infantry value = 97 }
            }

            relation             = { who = DES value = -200 }
            diplomatic_influence = { who = DES value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# California
country_event = {
    id      = 678508
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = CAL_created
            prestige = -25

            MEX_85 = { add_core = CAL } # California

            release = CAL
            random_country = {
                limit = { tag = CAL }

                set_country_flag = usstatehood_we_have_applied
                ruling_party_ideology = liberal
                political_reform = universal_voting
                political_reform = population_equal_weight
                political_reform = yes_meeting
                political_reform = free_press
                political_reform = non_socialist
                political_reform = secret_ballots
                capital = 84
                leadership = 40

                treasury = 20000

                ## Western bloc
                relation = { who = UOR value = 400 }
                relation = { who = DES value = 400 }
                create_alliance = UOR
                create_alliance = DES
                UOR = {
                    relation = { who = DES value = 400 }
                    create_alliance = DES
                }

                set_country_flag = asked_to_rejoin_usa

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Military tweaks: big boost

                political_reform = mandatory_service

                # 10 infantry @ 10 years
                small_arms      = 438
                ammunition      = 2738
                canned_food     = 2555
                regular_clothes = 365

                # 3 token brigades
                sub_unit = { type = infantry value = 84 }
                sub_unit = { type = infantry value = 84 }
                sub_unit = { type = infantry value = 84 }

                # 1 supply-less token ship
                sub_unit = { type = manowar value = 84 }
            }
            relation = { who = CAL value = -200 }
            diplomatic_influence = { who = CAL value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# Texas
country_event = {
    id      = 678509
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = TEX_created
            prestige = -25

            TEX_132 = { add_core = TEX } # Texas
            any_owned = {
                limit = { is_core = TEX }
                secede_province = TEX
            }
            random_country = {
                limit = { tag = TEX }

                set_country_flag = usstatehood_we_have_applied
                ruling_party_ideology = liberal
                political_reform = universal_voting
                political_reform = population_equal_weight
                political_reform = yes_meeting
                political_reform = free_press
                political_reform = non_socialist
                political_reform = secret_ballots
                capital = 133
                leadership = 40

                treasury = 20000

                # originally from The Lone Star State
                all_core = {
                    add_province_modifier = {
                        name = lone_star
                        duration = 465
                    }
                }
                any_pop = {
                    limit = {
                        location = {
                            is_core = TEX
                        }
                        culture = texan
                        NOT = {
                            type = soldiers
                            type = bureaucrats
                            type = aristocrats
                        }
                    }

                    reduce_pop = 4
                }

                set_country_flag = asked_to_join_csa
                set_country_flag = asked_to_rejoin_usa

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Southern bloc set up by CSA

                ## Military tweaks: big boost

                political_reform = mandatory_service

                # 10 infantry @ 10 years
                small_arms      = 438
                ammunition      = 2738
                canned_food     = 2555
                regular_clothes = 365
            }

            relation             = { who = TEX value = -200 }
            diplomatic_influence = { who = TEX value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# New England
country_event = {
    id      = 678510
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = NEN_created
            prestige = -25

            release = NEN
            random_country = {
                limit = { tag = NEN }

                set_country_flag = usstatehood_we_have_applied
                ruling_party_ideology = liberal
                political_reform = universal_voting
                political_reform = population_equal_weight
                political_reform = yes_meeting
                political_reform = free_press
                political_reform = non_socialist
                political_reform = secret_ballots
                capital = 243
                leadership = 40

                treasury = 20000

                set_country_flag = asked_to_join_fsa
                set_country_flag = asked_to_rejoin_usa

                random_list = {
                    1 = { add_country_modifier = { name = no_more_war duration = 90 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 95 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 100 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 105 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 110 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 115 } }
                    1 = { add_country_modifier = { name = no_more_war duration = 120 } }
                }

                ## Northern bloc set up by FSA

                ## Military tweaks

                # 4 brigades worth
                small_arms      = 40
                canned_food     = 40
                regular_clothes = 40

                # 1 extra transport to help get home the troops stranded in Florida
                199 = { change_controller = NEN }
                sub_unit = { type = frigate value = 199 }
                199 = { change_controller = CSA }
                # about 1 year's supplies
                clippper_convoy = 23
            }

            relation             = { who = NEN value = -200 }
            diplomatic_influence = { who = NEN value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# Alaska
country_event = {
    id      = 678511
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = LSK_created
            prestige = -25

            release = LSK
            random_country = {
                limit = { tag = LSK }

                set_country_flag = usstatehood_we_have_applied
                primary_culture = yankee
                add_accepted_culture = dixie
                # Country Workshop executive decision: otherwise Alaska has 0 primary/accepted
                add_accepted_culture = alaskan
                ruling_party_ideology = liberal
                political_reform = universal_voting
                political_reform = population_equal_weight
                political_reform = yes_meeting
                political_reform = free_press
                political_reform = non_socialist
                political_reform = secret_ballots
                capital = 3
                leadership = 40

                treasury = 20000

                ## Military tweaks

                # 1 supply-less token ship
                sub_unit = { type = frigate value = 3 }
            }

            relation             = { who = LSK value = -200 }
            diplomatic_influence = { who = LSK value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

# Hawaii
country_event = {
    id      = 678512
    title   = country-workshop.enable-country.name
    desc    = country-workshop.enable-country.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = { tag = USA }

            set_country_flag = HAW_created
            prestige = -25

            HAW = { civilized = yes }
            any_owned = {
                limit = { is_core = HAW }
                secede_province = HAW
            }
            random_country = {
                limit = { tag = HAW }

                set_country_flag = usstatehood_we_have_applied
                primary_culture = yankee
                add_accepted_culture = polynesian
                government = democracy
                ruling_party_ideology = liberal
                political_reform = universal_voting
                political_reform = population_equal_weight
                political_reform = yes_meeting
                political_reform = free_press
                political_reform = non_socialist
                political_reform = secret_ballots
                capital = 658
                leadership = 40

                treasury = 20000

                # Westernisation effects
                country_event = 90910

                all_core = {
                    add_core = USA
                }

                ## Special Pacific relationship
                relation = { who = LSK value = 100 }

                ## Military tweaks

                # 1 token brigade
                sub_unit = { type = infantry value = 658 }

                # 1 supply-less token ship
                sub_unit = { type = clipper_transport value = 658 }
            }

            relation             = { who = HAW value = -200 }
            diplomatic_influence = { who = HAW value = -200 }
        }
    }

    option = {
        name = country-workshop.enable-country.opt0
    }
}

country_event = {
    id      = 678513
    title   = country-workshop.disunited-states-start-north.name
    desc    = country-workshop.disunited-states-start-north.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    option = {
        name = country-workshop.disunited-states-start-north.opt0

        # Back to picking a region
        country_event = 678005

        ai_will_do = { factor = 1 }
    }

    option = {
        name = country-workshop.disunited-states-start-north.opt1

        random_owned = {
            limit = { owner = { NOT = { tag = LSK } } }
            owner = { change_tag_no_core_switch = LSK }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-north.opt2

        random_owned = {
            limit = { owner = { NOT = { tag = UOR } } }
            owner = { change_tag_no_core_switch = UOR }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-north.opt3

        random_owned = {
            limit = { owner = { NOT = { tag = DAK } } }
            owner = { change_tag_no_core_switch = DAK }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-north.opt4

        random_owned = {
            limit = { owner = { NOT = { tag = UIL } } }
            owner = { change_tag_no_core_switch = UIL }
        }

        ai_will_do = { factor = 0 }
    }
}

country_event = {
    id      = 678514
    title   = country-workshop.disunited-states-start-east.name
    desc    = country-workshop.disunited-states-start-east.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    option = {
        name = country-workshop.disunited-states-start-east.opt0

        # Back to picking a region
        country_event = 678005

        ai_will_do = { factor = 1 }
    }

    option = {
        name = country-workshop.disunited-states-start-east.opt1

        random_owned = {
            limit = { owner = { NOT = { tag = FSA } } }
            owner = { change_tag_no_core_switch = FSA }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-east.opt2

        random_owned = {
            limit = { owner = { NOT = { tag = NEN } } }
            owner = { change_tag_no_core_switch = NEN }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-east.opt3

        random_owned = {
            limit = { owner = { NOT = { tag = LIB } } }
            owner = { change_tag_no_core_switch = LIB }
        }

        ai_will_do = { factor = 0 }
    }
}

country_event = {
    id      = 678515
    title   = country-workshop.disunited-states-start-south.name
    desc    = country-workshop.disunited-states-start-south.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    option = {
        name = country-workshop.disunited-states-start-south.opt0

        # Back to picking a region
        country_event = 678005

        ai_will_do = { factor = 1 }
    }

    option = {
        name = country-workshop.disunited-states-start-south.opt1

        random_owned = {
            limit = { owner = { NOT = { tag = UNM } } }
            owner = { change_tag_no_core_switch = UNM }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-south.opt2

        random_owned = {
            limit = { owner = { NOT = { tag = TEX } } }
            owner = { change_tag_no_core_switch = TEX }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-south.opt3

        random_owned = {
            limit = { owner = { NOT = { tag = CSA } } }
            owner = { change_tag_no_core_switch = CSA }
        }

        ai_will_do = { factor = 0 }
    }
}

country_event = {
    id      = 678516
    title   = country-workshop.disunited-states-start-west.name
    desc    = country-workshop.disunited-states-start-west.desc
    picture = country-workshop.drawing-board

    is_triggered_only = yes

    option = {
        name = country-workshop.disunited-states-start-west.opt0

        # Back to picking a region
        country_event = 678005

        ai_will_do = { factor = 1 }
    }

    option = {
        name = country-workshop.disunited-states-start-west.opt1

        random_owned = {
            limit = { owner = { NOT = { tag = HAW } } }
            owner = { change_tag_no_core_switch = HAW }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-west.opt2

        random_owned = {
            limit = { owner = { NOT = { tag = CAL } } }
            owner = { change_tag_no_core_switch = CAL }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-west.opt3

        random_owned = {
            limit = { owner = { NOT = { tag = DES } } }
            owner = { change_tag_no_core_switch = DES }
        }

        ai_will_do = { factor = 0 }
    }

    option = {
        name = country-workshop.disunited-states-start-west.opt4

        random_owned = {
            limit = { owner = { NOT = { tag = UNB } } }
            owner = { change_tag_no_core_switch = UNB }
        }

        ai_will_do = { factor = 0 }
    }
}
